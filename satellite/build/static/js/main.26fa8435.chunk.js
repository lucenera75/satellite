(window.webpackJsonpdoit=window.webpackJsonpdoit||[]).push([[0],{25:function(e,t,n){e.exports=n(63)},31:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(24),c=n.n(a),i=n(2),u=n(5),s=n(6),l=n(9),d=n(8),f=n(10),p=n(3),g=n.n(p),v=n(11),b=(n(31),o.a.createContext({})),m=n(14),h=n.n(m),O=function(e){var t,n=e.todo,r=o.a.useContext(b),a=r.currentTodoId===n.id?"list-group-item active":"list-group-item",c=n.dependsOn.map(function(e){return r.board.todos[e]}),u=c.filter(function(e){return e.active});return o.a.createElement("li",(t={className:"list-group-item",tabIndex:"0"},Object(i.a)(t,"className",a),Object(i.a)(t,"onFocus",function(){return r.setCurrentTodoId(n.id)}),Object(i.a)(t,"onKeyPress",function(e){"Delete"===e.key&&r.removeTodo(n)}),t),o.a.createElement("input",{type:"checkbox",checked:!n.active,onChange:function(){n.active=!n.active,r.updateTodo(n)}}),"-".concat(n.title,"-").concat(u.length,"/").concat(c.length))},w=n(7),y=n(13),j=n.n(y),E=function(e){return e.title},C=function(e){return o.a.createElement("div",null,e.title)},x=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).getSuggestions=function(t){var n=new RegExp("\\s*(\\.{3}|\\w+\\-\\w+|\\w+'(?:\\w+)?|\\w+|[\\[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\\\\\-\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\_\\`\\{\\|\\}\\~\\]])"),r=t.trim().toLowerCase(),o=r.length;console.log(r);var a=e.context.getCurrentTodo();return 0===o?[]:Object.values(e.context.board.todos).filter(function(e){return!(a.dependsOn.indexOf(e.id)>=0)&&e.title.split(n).map(function(e){return e.toLowerCase()}).filter(function(e){return""!==e.trim()&&""!=r.trim()&&(e.toLowerCase().indexOf(r.toLowerCase())>=0||r.toLowerCase().indexOf(e.toLowerCase())>=0)}).length>0})},e.onChange=function(t,n){var r=n.newValue;e.setState({value:r})},e.onSuggestionsFetchRequested=function(t){var n=t.value;e.setState({suggestions:e.getSuggestions(n)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.state={value:"",suggestions:[]},e.getSuggestions=e.getSuggestions.bind(Object(w.a)(e)),e}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.suggestions,a={className:"form-control",style:{wordBreak:"break-word"},placeholder:"...",value:n,onChange:this.onChange,onKeyPress:function(t){if(console.log("key ",t.key),"Enter"===t.key){console.log(e.suggestion,e.state.value);var n=e.context.getCurrentTodo();n.dependsOn.push(e.suggestion.id),e.context.updateTodo(n)}}};return console.log(n),o.a.createElement(j.a,{suggestions:r,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:E,renderSuggestion:C,inputProps:a,onSuggestionSelected:function(t,n){var r=n.suggestion;e.suggestion=r}})}}]),t}(o.a.Component);x.contextType=b;n(62);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var k=function(){var e=o.a.useContext(b),t=e.board.todos[e.currentTodoId];return o.a.useEffect(function(){return function(){}}),t?o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.createAndEditNewTodo()}},"create new"),o.a.createElement("hr",null),o.a.createElement("input",{type:"text",className:"form-control",autoFocus:!0,placeholder:"title",onChange:function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.getCurrentTodo());n.title=t.target.value,e.updateTodo(n)},value:e.getCurrentTodo().title}),o.a.createElement("hr",null),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(x,null)),e.getCurrentTodo().dependsOn.map(function(t){return o.a.createElement("li",{key:t},o.a.createElement("button",{onClick:function(){var n=e.getCurrentTodo();n.dependsOn=n.dependsOn.filter(function(e){return e!==t}),e.updateTodo(n)}},"x"),e.board.todos[t].title," ")}))):o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.createAndEditNewTodo()}},"create new"))},S=function(){var e=o.a.useContext(b);return o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:"600px",height:"600px",overflow:"scroll"}},o.a.createElement(k,null)),o.a.createElement("div",{style:{width:"600px",height:"600px",overflow:"scroll"}},o.a.createElement("ul",{className:"list-group"},Object.values(e.board.todos).sort(function(t,n){if(t.active&&!n.active)return-1;if(!t.active&&n.active)return 1;var r=t.dependsOn.map(function(t){return e.board.todos[t]}).filter(function(e){return e.active}),o=n.dependsOn.map(function(t){return e.board.todos[t]}).filter(function(e){return e.active});return r.length-o.length}).map(function(e){return o.a.createElement(O,{key:e.id,todo:e})}))))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:9898/boards/1");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("http://localhost:9898/boards/1",t);case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={board:{todos:{},metadata:{}},currentTodo:!1,createAndEditNewTodo:function(){var e={id:(new Date).getTime(),title:"",description:"",active:!0,dependsOn:[]};n.state.addTodo(e),n.state.setCurrentTodoId(e.id)},getCurrentTodo:function(){return n.state.board.todos[n.state.currentTodoId]},setCurrentTodoId:function(e){n.setState({currentTodoId:e})},setBoard:function(e){return n.setState({board:e})},addTodo:function(e){var t=D({},n.state.board);t.todos[e.id]=e,n.state.setBoard(t)},removeTodo:function(e){var t=D({},n.state.board);delete t.todos[e.id],n.state.setBoard(t)},updateTodo:function(e){var t=D({},n.state.board);t.todos[e.id]=e,n.state.setBoard(t)}},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,n=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:t=e.sent.data,console.log(t),this.state.setBoard(t),setInterval(function(){return N(n.state.board)},3e3);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.board?o.a.createElement(b.Provider,{value:this.state},o.a.createElement(S,null)):o.a.createElement("div",null)}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.26fa8435.chunk.js.map